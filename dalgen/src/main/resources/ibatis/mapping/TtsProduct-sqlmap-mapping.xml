<?xml version="1.0" encoding="GB2312" ?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<!-- ==========================================================  -->
<!-- Configuration for ibatis sqlmap mapping.                    -->
<!-- ==========================================================  -->

<!-- ============================================================================= -->
<!-- This file is generated by <tt>paygw-dalgen</tt>, a DAL (Data Access Layer)  -->
<!-- code generation utility specially developed for <tt>paygw</tt> project.     -->
<!--                                                                               -->
<!-- PLEASE DO NOT MODIFY THIS FILE MANUALLY, or else your modification may be     -->
<!-- OVERWRITTEN by someone else. To modify the file, you should go to directory   -->
<!-- <tt>(project-home)/biz/dal/src/conf/dalgen</tt>, and find the corresponding   -->
<!-- configuration files. Modify those files according to your needs, then run     -->
<!-- <tt>paygw-dalgen</tt> to generate this file.                                -->
<!--                                                                               -->
<!-- ============================================================================= -->

<sqlMap namespace="TtsProduct">
    <!-- ============================================= -->
    <!-- RESULT MAPS                                   -->
    <!-- ============================================= -->


    <!-- result maps for database table tts_product -->
    <resultMap id="RM-TTS-PRODUCT" class="test.model.TtsProductDto">
        <result property="id" column="id" javaType="java.lang.Long" jdbcType="BIGINT"/>
        <result property="pid" column="pid" javaType="java.lang.Long" jdbcType="BIGINT"/>
        <result property="sourceId" column="source_id" javaType="java.lang.Long" jdbcType="BIGINT"/>
        <result property="cid" column="cid" javaType="java.lang.Integer" jdbcType="INT"/>
        <result property="website" column="website" javaType="java.lang.Integer" jdbcType="TINYINT"/>
        <result property="isIndex" column="is_index" javaType="java.lang.Integer" jdbcType="TINYINT"/>
        <result property="isMobileTop" column="is_mobile_top" javaType="java.lang.Integer" jdbcType="TINYINT"/>
        <result property="orderId" column="order_id" javaType="java.lang.Integer" jdbcType="INT"/>
        <result property="randomId" column="random_id" javaType="java.lang.Integer" jdbcType="INT"/>
        <result property="price" column="price" javaType="java.lang.Integer" jdbcType="INT"/>
        <result property="sales" column="sales" javaType="java.lang.Integer" jdbcType="INT"/>
        <result property="createTime" column="create_time" javaType="java.util.Date" jdbcType="DATETIME"/>
        <result property="modifyTime" column="modify_time" javaType="java.util.Date" jdbcType="DATETIME"/>
        <result property="publishUserId" column="publish_user_id" javaType="java.lang.Integer" jdbcType="INT"/>
        <result property="modifyUserId" column="modify_user_id" javaType="java.lang.Integer" jdbcType="INT"/>
        <result property="isDeleted" column="is_deleted" javaType="java.lang.Integer" jdbcType="TINYINT"/>
        <result property="deletedType" column="deleted_type" javaType="java.lang.Integer" jdbcType="TINYINT"/>
        <result property="leafCateId" column="leaf_cate_id" javaType="java.lang.Integer" jdbcType="INT"/>
        <result property="isMobileDisplay" column="is_mobile_display" javaType="java.lang.Integer" jdbcType="TINYINT"/>
        <result property="onlineTime" column="online_time" javaType="java.util.Date" jdbcType="DATETIME"/>
        <result property="description" column="description" javaType="java.lang.String" jdbcType="VARCHAR"/>
        <result property="url" column="url" javaType="java.lang.String" jdbcType="VARCHAR"/>
    </resultMap>

	<sql id="fieldTitle">
		*
	</sql>

    <!-- ============================================= -->
    <!-- mapped statements for TtsProductDaoImpl -->
    <!-- ============================================= -->
    <!-- mapped statement for TtsProductDaoImpl.getTest -->
    <select id="MS-TTS-PRODUCT-GET-TEST" resultMap="RMS.RM-TTS-PRODUCT">
        SELECT <include refid="fieldTitle" /> FROM tts_product
    </select>

    <!-- mapped statement for TtsProductDaoImpl.insert -->
	<insert id="MS-TTS-PRODUCT-INSERT">
	insert into tts_product
			(pid,source_id,cid,website,is_index,is_mobile_top,price,sales,create_time,modify_time,publish_user_id,modify_user_id,is_deleted,order_id,leaf_cate_id,online_time,description,url)
			VALUES
			(#pid#, #sourceId#,#cid#, #website#, #isIndex#, #isMobileTop#, #price#,
			#sales#, now(), now(), #publishUserId#, #modifyUserId#, #isDeleted#,
			#orderId#, #leafCateId#, #onlineTime#, #description#, #url#})
    <selectKey resultClass="java.lang.Long" keyProperty="id">
		select last_insert_id() as id
    </selectKey>
	</insert>

    <!-- mapped statement for TtsProductDaoImpl.updateRandomId -->
    <update id="MS-TTS-PRODUCT-UPDATE-RANDOM-ID">
    <![CDATA[
        update tts_product set random_id=#randomId# where (id = #id#)
    ]]>
    </update>

    <!-- mapped statement for TtsProductDaoImpl.getById -->
    <select id="MS-TTS-PRODUCT-GET-BY-ID" resultMap="RMS.RM-TTS-PRODUCT">
    <![CDATA[
        select id, pid, source_id, cid, website, is_index, is_mobile_top, order_id, price, sales, create_time, modify_time, publish_user_id, modify_user_id, is_deleted, leaf_cate_id, is_mobile_display, online_time, description, url from tts_product where (id = #value#)
    ]]>
    </select>

    <!-- mapped statement for TtsProductDaoImpl.getBySourceId -->
    <select id="MS-TTS-PRODUCT-GET-BY-SOURCE-ID" resultMap="RMS.RM-TTS-PRODUCT">
    <![CDATA[
        select id, pid, source_id, cid, website, is_index, is_mobile_top, order_id, price, sales, create_time, modify_time, publish_user_id, modify_user_id, is_deleted, leaf_cate_id, is_mobile_display, online_time, description, url from tts_product where (source_id = #value#)
    ]]>
    </select>

    <!-- mapped statement for TtsProductDaoImpl.updateBatch -->
    <update id="MS-TTS-PRODUCT-UPDATE-BATCH">
        update tts_product
			SET is_deleted = 1
			where id in $(ids)
    </update>

    <!-- mapped statement for TtsProductDaoImpl.deleteProduct -->
    <update id="MS-TTS-PRODUCT-DELETE-PRODUCT">
        update tts_product
		set
		is_deleted=#isDeleted#
		where
		 <dynamic prepend="and">
		 <isNull property="id">
			<isNotNull property="pid">
				pid=#pid#
			</isNotNull>
		</isNull>
		<isNotNull property="id">
			id = #id# 
		</isNotNull>
		 </dynamic>
    </update>

    <!-- mapped statement for TtsProductDaoImpl.selectByPid -->
    <select id="MS-TTS-PRODUCT-SELECT-BY-PID" resultMap="RMS.RM-TTS-PRODUCT">
    <![CDATA[
        select id, pid, source_id, cid, website, is_index, is_mobile_top, order_id, price, sales, create_time, modify_time, publish_user_id, modify_user_id, is_deleted, leaf_cate_id, is_mobile_display, online_time, description, url from tts_product where (pid = #value#)
    ]]>
    </select>

    <!-- mapped statement for TtsProductDaoImpl.selectCount -->
    <select id="MS-TTS-PRODUCT-SELECT-COUNT" resultType="java.lang.Integer">
    <![CDATA[
        select count(1) from tts_product
    ]]>
    </select>

    <!-- mapped statement for TtsProductDaoImpl.deleteById -->
    <delete id="MS-TTS-PRODUCT-DELETE-BY-ID">
    <![CDATA[
        delete from tts_product where (id = #value#)
    ]]>
    </delete>

    <!-- mapped statement for TtsProductDaoImpl.updateById -->
    <update id="MS-TTS-PRODUCT-UPDATE-BY-ID">
        update tts_product
		SET
		is_index=#isIndex#,
		is_mobile_top=#isMobileTop#,
		leaf_cate_id=#leafCateId#,
		order_id=#orderId#,
		online_time=#onlineTime# ,
		description=#description#,
		modify_user_id=#modifyUserId#,
		url=#url#,
		modify_time=NOW()
		WHERE
		id = #id#
    </update>

    <!-- mapped statement for TtsProductDaoImpl.selectByTagId -->
    <select id="MS-TTS-PRODUCT-SELECT-BY-TAG-ID" resultMap="RMS.RM-TTS-PRODUCT">
        SELECT 		t.id,t.pid,t.source_id,t.cid,t.website,t.is_index,t.is_mobile_top,t.order_id,t.price,t.sales,t.create_time,t.modify_time,t.publish_user_id,t.modify_user_id,t.is_deleted,t.leaf_cate_id ,t.is_mobile_display,t.online_time,t.description,t.url from tts_product t
		LEFT JOIN tts_product_tag tc on t.id = tc.tts_product_id
		where tc.tag_id =#tagId#
		limit ##
    </select>

</sqlMap>